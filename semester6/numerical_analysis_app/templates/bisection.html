{% extends "base.html" %}

{% block content %}
<section class="method-section">
    <h2>Bisection Method</h2>

    <form method="POST">
        <div class="form-group">
            <label for="function">Function (in terms of x):</label>
            <input type="text" id="function" name="function" required placeholder="e.g., x**2 - 4">
        </div>

        <div class="form-group">
            <label for="a">Lower bound (a):</label>
            <input type="number" id="a" name="a" required step="any" placeholder="e.g., 1">
        </div>

        <div class="form-group">
            <label for="b">Upper bound (b):</label>
            <input type="number" id="b" name="b" required step="any" placeholder="e.g., 3">
        </div>

        <div class="form-group">
            <label for="tolerance">Tolerance:</label>
            <input type="number" id="tolerance" name="tolerance" required step="any" min="0" value="0.0001">
        </div>

        <div class="form-group">
            <label for="max_iter">Maximum iterations:</label>
            <input type="number" id="max_iter" name="max_iter" required min="1" value="20">
        </div>

        <button type="submit">Find Root</button>
    </form>

    {% if error %}
    <div class="error">{{ error }}</div>
    {% endif %}

    {% if show_result %}
    <div class="result-section">
        <h3>Result</h3>
        <p>Approximate root: <strong>{{ root }}</strong></p>

        <h4>Iteration Details</h4>
        <table>
            <tr>
                <th>Iteration</th>
                <th>a</th>
                <th>b</th>
                <th>c</th>
                <!-- <th>f(a)</th> -->
                <!-- <th>f(b)</th> -->
                <th>f(c)</th>
                <th>|b-c|</th>
            </tr>
            {% for iter in iterations %}
            <tr>
                <td>{{ iter.iteration }}</td>
                <td>{{ iter.a }}</td>
                <td>{{ iter.b }}</td>
                <td>{{ iter.c }}</td>
                <!-- <td>{{ iter['f(a)'] }}</td> -->
                <!-- <td>{{ iter['f(b)'] }}</td> -->
                <td>{{ iter['f(c)'] }}</td>
                <td>{{ iter['abs_diff'] }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}

    <div class="algorithm">
        <h3>Bisection Method Algorithm</h3>
        <ol>
            <li>Start with interval [a, b] where f(a) and f(b) have opposite signs</li>
            <li>Compute midpoint c = (a + b)/2</li>
            <li>Calculate |b - c| as a measure of interval size</li>
            <li>If f(c) = 0 or |f(c)| &lt; tolerance, c is the root</li>
            <li>Else if f(a)*f(c) &lt; 0, set b = c</li>
            <li>Else set a = c</li>
            <li>Repeat until convergence or maximum iterations reached</li>
        </ol>
    </div>
</section>
{% endblock %}